(this["webpackJsonpto-do-ui"]=this["webpackJsonpto-do-ui"]||[]).push([[0],{36:function(e,t,n){e.exports=n(49)},41:function(e,t,n){},42:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(17),r=n.n(c);n(41),n(42);function i(){return o.a.createElement("div",{style:{backgroundColor:"lightblue",padding:"10px"}},o.a.createElement("h1",null,"Task Manager"))}var l=n(19),s=n(16),u=n(6),d=n(7),m=n(65),h=n(31),p=n.n(h),E=n(66),f=n(30),g=n.n(f),k=n(64);function v(e){var t=o.a.useState(e.task.isComplete),n=Object(u.a)(t,2),a=n[0],c=n[1],r=o.a.useState(a?{textDecorationLine:"line-through"}:{}),i=Object(u.a)(r,2),l=i[0],s=i[1],h=o.a.useState(a),f=Object(u.a)(h,2),v=f[0],b=f[1],C=function(){a?(s({}),c(!1),b(!1)):(s({textDecorationLine:"line-through"}),c(!0),b(!0))};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(k.a,{container:!0,spacing:0,justify:"center",alignItems:"baseline"},o.a.createElement(k.a,{item:!0,xs:!0}),o.a.createElement(k.a,{item:!0,xs:!0},o.a.createElement(m.a,{checked:v,onChange:function(e){return b(e.target.checked)},color:"primary",onClick:function(){C(),fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(e.task._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isComplete:!a})}).then((function(e){return e.ok||console.log("Did not patch"),e.json()})).then((function(t){c(t.isComplete),e.refresh()})).catch((function(e){console.log(e)}))}})),o.a.createElement(k.a,{item:!0,xs:!0},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("div",{style:l},"".concat(new Date(e.task.date).toLocaleDateString()," | ").concat(e.task.text," ")))),o.a.createElement(k.a,{item:!0,xs:!0},o.a.createElement(E.a,{"aria-label":"edit",onClick:function(){e.setIsEdit(!0),e.setText(e.task.text),e.setEditId(e.task._id)}},o.a.createElement(g.a,{fontSize:"small"})),o.a.createElement(E.a,{"aria-label":"delete",onClick:function(){var t=e.task;fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(t){e.refresh()})).then((function(e){C()})).catch((function(e){console.log(e)}))}},o.a.createElement(p.a,{fontSize:"small"}))),o.a.createElement(k.a,{item:!0,xs:!0}))))}function b(e){var t=function(t){e.setText(t.target.value),13===t.keyCode&&e.onClickAdd(t)};return o.a.createElement("div",{style:{backgroundColor:"lightblue",padding:"10px"}},e.isEdit?"Edit Task:":"New Task:",o.a.createElement("input",{style:{margin:"5px"},type:"text",onChange:t,value:e.text,onKeyUp:t}),e.isEdit?o.a.createElement("button",{onClick:e.onClickEdit},"Edit"):o.a.createElement("button",{onClick:e.onClickAdd},"Add"))}var C=o.a.createContext({}),y=function(e){var t=o.a.useState(!1),n=Object(u.a)(t,2),a=n[0],c=n[1],r=o.a.useState(""),i=Object(u.a)(r,2),l=i[0],s=i[1];return o.a.createElement("div",null,o.a.createElement(C.Provider,{value:{loggedIn:a,setLoggedIn:c,token:l,setToken:s}},e.children))},w=C.Consumer,x=((new Date).toLocaleDateString(),(new Date).toLocaleDateString(),{listStyleType:"none"});function j(){var e=o.a.useState([]),t=Object(u.a)(e,2),n=t[0],a=t[1],c=o.a.useState(""),r=Object(u.a)(c,2),i=r[0],l=r[1],s=o.a.useState(!1),m=Object(u.a)(s,2),h=m[0],p=m[1],E=o.a.useState(""),f=Object(u.a)(E,2),g=f[0],k=f[1],y=o.a.useContext(C).setLoggedIn,w=function(){fetch("".concat(d.uriBase).concat(d.currentApi),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(e){a(e)})).catch((function(e){console.log(e)}))};return o.a.useEffect((function(){w()}),[]),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("ul",null,n.map((function(e,t){return o.a.createElement("li",{style:x,key:t},o.a.createElement(v,{task:e,refresh:w,setIsEdit:p,setText:l,setEditId:k}))})))),o.a.createElement("div",null,o.a.createElement(b,{text:i,setText:l,onClickAdd:function(e){if(""===i)return alert("Task cannot be empty");var t={date:new Date,text:i,isComplete:!1};fetch("".concat(d.uriBase).concat(d.currentApi),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(e){w()})).catch((function(e){console.log(e)})),l("")},refresh:w,isEdit:h,setIsEdit:p,onClickEdit:function(){p(!1),""!==g?fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(g),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i})}).then((function(e){if(!e.ok)throw new Error("Could not update with edit");return e})).then((function(e){w(),l("")})).catch((function(e){console.log(e)})):alert("Cannot Edit")}})),o.a.createElement("button",{onClick:function(){y(!1)}},"LOGOUT"))}var O=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),l=Object(u.a)(i,2),s=l[0],m=l[1],h=Object(a.useContext)(C),p=h.loggedIn,E=h.setLoggedIn,f=function(e){switch(e.target.name){case"email":r(e.target.value);break;case"password":m(e.target.value)}};return o.a.createElement("div",null,"Email:",o.a.createElement("input",{type:"email",name:"email",onChange:f,value:c}),o.a.createElement("br",null),"Password:",o.a.createElement("input",{type:"password",name:"password",onChange:f,value:s}),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){var t={email:c,password:s};fetch("".concat(d.uriBase).concat(d.userApi,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Could not get user");return e.json()})).then((function(t){E(t),e.history.push("/tasks")})).catch((function(e){console.error(e.name,e.message)}))}},"Log In"),o.a.createElement("br",null),"You are ".concat(p?"are":"are not"," logged in"))},T=n(33);function S(e){var t=e.component,n=Object(T.a)(e,["component"]);return o.a.createElement(w,null,(function(e){var a=e.loggedIn;return o.a.createElement(s.b,Object.assign({render:function(e){return a?o.a.createElement(t,e):o.a.createElement(s.a,{to:"/"})}},n))}))}var A=function(e){return o.a.createElement("div",null,"This is protected")};var I=function(e){return o.a.createElement("div",null,o.a.createElement(l.a,null,o.a.createElement(y,null,o.a.createElement(s.d,null,o.a.createElement(S,{path:"/protected",component:A}),o.a.createElement(S,{path:"/tasks",component:j}),o.a.createElement(s.b,{path:"/",component:O})))))};var B=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(i,null),o.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t){e.exports.uriBase="http://localhost:5001",e.exports.currentApi="/tasks",e.exports.userApi="/users"}},[[36,1,2]]]);
//# sourceMappingURL=main.9d1cc2e1.chunk.js.map