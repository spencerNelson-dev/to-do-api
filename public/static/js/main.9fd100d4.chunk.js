(this["webpackJsonpto-do-ui"]=this["webpackJsonpto-do-ui"]||[]).push([[0],{125:function(e,t,n){e.exports=n(237)},130:function(e,t,n){},131:function(e,t,n){},139:function(e,t){},141:function(e,t){},179:function(e,t){},180:function(e,t){},237:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(31),r=n.n(c),i=(n(130),n(131),n(10)),l=o.a.createContext({}),s=function(e){var t=o.a.useState(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],r=o.a.useState(""),s=Object(i.a)(r,2),u=s[0],d=s[1];return o.a.createElement("div",null,o.a.createElement(l.Provider,{value:{loggedIn:a,setLoggedIn:c,token:u,setToken:d}},e.children))},u=l.Consumer,d=n(9);function m(e){return o.a.createElement("div",{style:{backgroundColor:"lightblue",padding:"10px"}},o.a.createElement("h1",null,"Task Manager"))}var h=n(46),p=n(26),f=n(253),E=n(119),g=n.n(E),k=n(254),v=n(118),b=n.n(v),y=n(252);function C(e){var t=o.a.useState(e.task.isComplete),n=Object(i.a)(t,2),a=n[0],c=n[1],r=o.a.useState(a?{textDecorationLine:"line-through"}:{}),l=Object(i.a)(r,2),s=l[0],u=l[1],m=o.a.useState(a),h=Object(i.a)(m,2),p=h[0],E=h[1],v=function(){a?(u({}),c(!1),E(!1)):(u({textDecorationLine:"line-through"}),c(!0),E(!0))};return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(y.a,{container:!0,spacing:0,justify:"center",alignItems:"baseline"},o.a.createElement(y.a,{item:!0,xs:!0}),o.a.createElement(y.a,{item:!0,xs:!0},o.a.createElement(f.a,{checked:p,onChange:function(e){return E(e.target.checked)},color:"primary",onClick:function(){v(),fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(e.task._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isComplete:!a})}).then((function(e){return e.ok||console.log("Did not patch"),e.json()})).then((function(t){c(t.isComplete),e.refresh()})).catch((function(e){console.log(e)}))}})),o.a.createElement(y.a,{item:!0,xs:!0},o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("div",{style:s},"".concat(e.task.text)))),o.a.createElement(y.a,{item:!0,xs:!0},o.a.createElement(k.a,{"aria-label":"edit",onClick:function(){e.setIsEdit(!0),e.setText(e.task.text),e.setEditId(e.task._id)}},o.a.createElement(b.a,{fontSize:"small"})),o.a.createElement(k.a,{"aria-label":"delete",onClick:function(){var t=e.task;fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(t){e.refresh()})).then((function(e){v()})).catch((function(e){console.log(e)}))}},o.a.createElement(g.a,{fontSize:"small"}))),o.a.createElement(y.a,{item:!0,xs:!0}))))}function x(e){var t=function(t){e.setText(t.target.value),13===t.keyCode&&e.onClickAdd(t)};return o.a.createElement("div",{style:{backgroundColor:"lightblue",padding:"10px",height:"50px"}},e.isEdit?"Edit Task:":"New Task:",o.a.createElement("input",{style:{margin:"5px",height:"50%",width:"35%",fontSize:"16px"},type:"text",onChange:t,value:e.text,onKeyUp:t}),e.isEdit?o.a.createElement("button",{onClick:e.onClickEdit},"Edit"):o.a.createElement("button",{onClick:e.onClickAdd},"Add"))}var w=n(120),T=n.n(w);var j={listStyleType:"none"},S={listStyleType:"none",backgroundColor:"lightBlue"};function O(){var e=o.a.useState(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=o.a.useState([]),r=Object(i.a)(c,2),s=r[0],u=r[1],m=o.a.useState(""),h=Object(i.a)(m,2),p=h[0],f=h[1],E=o.a.useState(!1),g=Object(i.a)(E,2),k=g[0],v=g[1],b=o.a.useState(""),y=Object(i.a)(b,2),w=y[0],O=y[1],A=o.a.useContext(l),D=A.setLoggedIn,I=A.token,B=function(){(function(e,t){return new Promise((function(n,a){T.a.verify(e,t,(function(e,t){null!==e?a(e):n(t)}))}))})(I,d.JWT_KEY).then((function(e){return e.user})).then((function(e){a(e),fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(e._id),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(e){u(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))};o.a.useEffect((function(){B()}),[]);var L=new Date(0);return o.a.createElement("div",null,o.a.createElement("h4",null,"".concat(n.firstName," ").concat(n.lastName,"'s Tasks:")),o.a.createElement("div",null,o.a.createElement("ul",{style:{padding:0}},s.reduce((function(e,t){return new Date(t.date).toLocaleDateString()!==new Date(L).toLocaleDateString()?(L=t.date,e.push(L),e.push(t)):e.push(t),e}),[]).map((function(e,t){return e.text?o.a.createElement("li",{style:j,key:t},o.a.createElement(C,{task:e,refresh:B,setIsEdit:v,setText:f,setEditId:O})):o.a.createElement("li",{style:S,key:t},"***** ".concat(new Date(e).toLocaleDateString()," *****"))})))),o.a.createElement("div",null,o.a.createElement(x,{text:p,setText:f,onClickAdd:function(e){if(""===p)return alert("Task cannot be empty");var t={date:new Date,text:p,isComplete:!1,userId:n._id};fetch("".concat(d.uriBase).concat(d.currentApi),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Bad response");return e.json()})).then((function(e){B()})).catch((function(e){console.log(e)})),f("")},refresh:B,isEdit:k,setIsEdit:v,onClickEdit:function(){v(!1),""!==w?fetch("".concat(d.uriBase).concat(d.currentApi,"/").concat(w),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p})}).then((function(e){if(!e.ok)throw new Error("Could not update with edit");return e})).then((function(e){B(),f("")})).catch((function(e){console.log(e)})):alert("Cannot Edit")}})),o.a.createElement("button",{onClick:function(){D(!1)}},"LOGOUT"))}var A=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),u=Object(i.a)(s,2),m=u[0],h=u[1],p=Object(a.useContext)(l),f=(p.loggedIn,p.setLoggedIn),E=p.setToken,g=function(e){switch(e.target.name){case"email":r(e.target.value);break;case"password":h(e.target.value)}};return o.a.createElement("div",null,"Email:",o.a.createElement("input",{type:"email",name:"email",onChange:g,value:c}),o.a.createElement("br",null),"Password:",o.a.createElement("input",{type:"password",name:"password",onChange:g,value:m}),o.a.createElement("br",null),o.a.createElement("button",{onClick:function(){var t={email:c,password:m};fetch("".concat(d.uriBase).concat(d.userApi,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Could not get user");return console.log("httpresult"),e.json()})).then((function(t){""!==t.token&&(f(!0),E(t.token)),e.history.push("/tasks")})).catch((function(e){console.error(e.name,e.message)}))}},"Log In"),o.a.createElement("br",null))},D=n(122);function I(e){var t=e.component,n=Object(D.a)(e,["component"]);return o.a.createElement(u,null,(function(e){var a=e.loggedIn;return o.a.createElement(p.b,Object.assign({render:function(e){return a?o.a.createElement(t,e):o.a.createElement(p.a,{to:"/"})}},n))}))}var B=function(e){return o.a.createElement("div",null,"This is protected")};var L=function(e){return o.a.createElement("div",null,o.a.createElement(h.a,null,o.a.createElement(s,null,o.a.createElement(p.d,null,o.a.createElement(I,{path:"/protected",component:B}),o.a.createElement(I,{path:"/tasks",component:O}),o.a.createElement(p.b,{path:"/",component:A})))))};var J=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(m,null),o.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t){var n=[{date:(new Date).toLocaleDateString(),text:"My first task",isComplete:!1},{date:(new Date).toLocaleDateString(),text:"My second task should start completed",isComplete:!0}];e.exports.uriBase="https://sn-todo.herokuapp.com",e.exports.currentApi="/tasks",e.exports.userApi="/users",e.exports.JWT_KEY="12345",e.exports.DUMMY_DATA=n}},[[125,1,2]]]);
//# sourceMappingURL=main.9fd100d4.chunk.js.map